{
  "schemaVersion": 2,
  "dockerfileLines": [
    "FROM python:3.8.1",
    "ENV PYTHONUNBUFFERED 1",
    
    "ENV SYS_APP_ENV $SYS_APP_ENV",
    "ENV APP_SECRET_KEY $APP_SECRET_KEY",
    "ENV SYS_APP_DEBUG $SYS_APP_DEBUG",

    "RUN pip install -U pip setuptools",

    "RUN mkdir -p /usr/src/app",
    "WORKDIR /usr/src/app",
    "COPY ./ /usr/src/app",

    "RUN pip install --upgrade pip",
    "RUN pip install pipenv",
    "RUN pipenv lock --requirements > requirements.txt",
    "RUN pip install -r requirements.txt",

    "VOLUME ./workspaces /usr/src/app/workspaces"

    "EXPOSE 8000",
    "CMD sh /usr/src/app/run_web.sh"
  ]
}
