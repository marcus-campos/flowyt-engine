{
    "id": "sapi-vulnerabilities-insert-frequency",
    "name": "Insert frequency",
    "pipeline": [
        {
            "action": "start",
            "data": {},
            "id": "start",
            "next_action": "sql_db_conn_worker_frequency"
        },
        {
            "id": "sql_db_conn_worker_frequency",
            "action": "sql_db",
            "data": {
                "conn_name": "socportal"
            },
            "next_action": "flow_var_db"
        },
        {
            "id": "flow_var_db",
            "action": "flow_var",
            "data": {
                "worker_name": "massification",
                "session": "${response.db.session}",
                "frequency_model": "${function.models.WorkerFrequency}",
                "frequency_service": "${function.services.WorkerFrequency}"
            },
            "next_action": "insert_frequency"
        },
        {
            "id": "insert_frequency",
            "action": "run",
            "data": {
                "inserted": "${flow.frequency_service(flow.session).get_or_create(flow.frequency_model,flow.worker_name)}"
            },
            "next_action": "end"
        },
        {
            "id": "end",
            "action": "end",
            "data": {},
            "next_action": null
        }
    ]
}